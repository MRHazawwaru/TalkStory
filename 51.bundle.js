"use strict";(self.webpackChunkTalkStory=self.webpackChunkTalkStory||[]).push([[51],{51:(t,n,e)=>{e.r(n),e.d(n,{default:()=>i});var o=e(989),a=e(233),s=e(510);class i{constructor(){}async render(){const t=document.getElementById("main-content");t&&(await(0,o.A)(t,'\n        <section class="story-list-section">\n          <h2>Daftar Cerita</h2>\n          <div class="container-card" id="story-container"></div>\n        </section>\n    '),(0,a.A)())}async showStories(t){const n=document.getElementById("story-container");if(n){n.innerHTML="";for(const e of t){const t=document.createElement("article");t.className="box-card",t.innerHTML=`\n        <div class="img-box" title="${e.name}">\n          <img src="${e.photoUrl}" alt="Foto cerita dari ${e.name}">\n        </div>\n        <div class="content-card">\n          <h3>${e.name}</h3>\n          <h4>${e.locationName||"Tanpa Lokasi"}</h4>\n          <p>${e.description}</p>\n          <button class="ghost-btn" data-story='${JSON.stringify(e)}'>\n            read more...\n          </button>\n        </div>\n      `,n.appendChild(t)}this.bindDetailButtons()}}bindDetailButtons(){document.querySelectorAll(".ghost-btn").forEach((t=>{t.addEventListener("click",(()=>{const n=JSON.parse(t.getAttribute("data-story"));this.showStoryDetailPopup(n)}))}))}showStoryDetailPopup(t){const n=`map-${Date.now()}`,e=document.createElement("div");e.classList.add("story-popup"),e.innerHTML=`\n      <div class="popup-content">\n        <img src="${t.photoUrl}" alt="Foto cerita detail dari ${t.name}" />\n        <p><strong>${t.name}</strong> - ${new Date(t.createdAt).toLocaleDateString()}</p>\n        <p>${t.description}</p>\n        <div id="${n}" class="popup-map"></div>\n        <button class="popup-close-btn">Tutup</button>\n      </div>\n    `,document.body.appendChild(e),setTimeout((()=>{const e=(0,s.p)(n),o=`\n        <strong>Lokasi:</strong> ${t.locationName||"Tidak diketahui"}<br>\n        <strong>Lat:</strong> ${t.lat}<br>\n        <strong>Lon:</strong> ${t.lon}\n      `;(0,s.Y)(e,[t.lat,t.lon],o),e.invalidateSize()}),100),e.querySelector(".popup-close-btn").addEventListener("click",(()=>{e.remove()}))}}},510:(t,n,e)=>{e.d(n,{Y:()=>i,p:()=>s});var o=e(481),a=e.n(o);const s=(t,n)=>{const e=a().map(t).setView([-7.8,110.3],13);return a().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data Â© OpenStreetMap contributors"}).addTo(e),n&&e.on("click",(t=>{n(t.latlng)})),e},i=(t,n,e="")=>{const o=a().marker(n).addTo(t);return e&&o.bindPopup(e).openPopup(),o}},989:(t,n,e)=>{e.d(n,{A:()=>o});const o=(t,n)=>{document.startViewTransition?document.startViewTransition((()=>{t.innerHTML=n})):t.innerHTML=n}}}]);