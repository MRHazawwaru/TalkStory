"use strict";(self.webpackChunkTalkStory=self.webpackChunkTalkStory||[]).push([[633],{510:(t,e,n)=>{n.d(e,{Y:()=>l,p:()=>i});var a=n(481),o=n.n(a);const i=(t,e)=>{const n=o().map(t).setView([-7.8,110.3],13);return o().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data Â© OpenStreetMap contributors"}).addTo(n),e&&n.on("click",(t=>{e(t.latlng)})),n},l=(t,e,n="")=>{const a=o().marker(e).addTo(t);return n&&a.bindPopup(n).openPopup(),a}},633:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var a=n(465),o=n.n(a),i=n(989),l=n(233),d=n(510);class r{constructor(){this.uploadedImage=null,this.capturedImage=null}async render(){const t=document.getElementById("main-content");t&&(await(0,i.A)(t,'\n        <div class="add-story-card">\n          <h2>Posting Cerita</h2>\n          <form id="story-form">\n            <label for="description" class="sr-only">Isi Cerita</label>\n            <textarea id="description" placeholder="Ceritakan pengalaman Anda..." required></textarea><br>\n\n            <label for="photo-options" class="sr-only">Foto</label>\n            <div class="photo-options">\n              <button type="button" id="upload-option" class="option-button">\n                <i class="fa fa-upload"></i> Unggah Foto\n              </button>\n              <button type="button" id="camera-option" class="option-button">\n                <i class="fa fa-camera"></i> Ambil Foto\n              </button>\n            </div>\n\n            <div id="camera-wrapper" style="display: none;">\n              <video id="camera" autoplay></video>\n              <button type="button" id="capture">Ambil Foto</button>\n            </div>\n\n            <input type="file" id="upload" accept="image/*" style="display: none;" /><br>\n\n            <label>Lokasi</label>\n            <div id="map" class="map-style"></div>\n\n            <div class="latlon-wrapper">\n              <label for="lat" class="sr-only">Latitude</label>\n              <input type="text" id="lat" placeholder="Latitude" readonly />\n              <label for="lon" class="sr-only">Longitude</label>\n              <input type="text" id="lon" placeholder="Longitude" readonly />\n            </div><br>\n\n            <div class="form-actions">\n              <button type="button" id="cancel" class="cancel">Batal</button>\n              <button type="submit" class="primary">Posting Cerita</button>\n            </div>\n          </form>\n        </div>\n    '),(0,l.A)())}renderMap(t){this.map=(0,d.p)("map",t)}addMarkerToMap(t,e){this.marker&&this.map.removeLayer(this.marker),this.marker=(0,d.Y)(this.map,t,e)}async showAlert(t,e,n){return o().fire(t,e,n)}async showConfirmDialog(t,e){return(await o().fire({title:t,text:e,icon:"question",showCancelButton:!0,confirmButtonText:"Izinkan",cancelButtonText:"Batal"})).isConfirmed}bindEvents({onSubmit:t,onCancel:e,onOptionSelect:n,onCapture:a,onFileUpload:i}){const l=document.getElementById("cancel"),d=document.getElementById("upload-option"),r=document.getElementById("camera-option"),s=document.getElementById("capture"),c=document.getElementById("story-form"),u=this.getUploadInput();l&&l.addEventListener("click",e),d&&d.addEventListener("click",(()=>{this.toggleCamera(!1),n("upload")})),r&&r.addEventListener("click",(()=>{n("camera")})),s&&s.addEventListener("click",a),c&&c.addEventListener("submit",(e=>{e.preventDefault();const n=document.getElementById("description").value,a=document.getElementById("lat").value,i=document.getElementById("lon").value,l=this.uploadedImage||this.capturedImage;if(!l)return o().fire("Oops","Silakan pilih atau ambil gambar dulu.","warning");t({description:n,lat:a,lon:i,image:l})})),u&&u.addEventListener("change",(t=>{i(t.target.files[0])}))}toggleCamera(t){document.getElementById("camera-wrapper").style.display=t?"block":"none",document.getElementById("upload").style.display=t?"none":"block"}updateLatLon(t,e){document.getElementById("lat").value=t,document.getElementById("lon").value=e}setCapturedImage(t){this.capturedImage=t}setUploadedImage(t){this.uploadedImage=t}getUploadInput(){return document.getElementById("upload")}getVideoElement(){return document.getElementById("camera")}navigateToStoryList(){location.hash="/story-list"}async captureImage(t){return new Promise((e=>{const n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight,n.getContext("2d").drawImage(t,0,0),n.toBlob((t=>e(t)),"image/jpeg")}))}}},989:(t,e,n)=>{n.d(e,{A:()=>a});const a=(t,e)=>{document.startViewTransition?document.startViewTransition((()=>{t.innerHTML=e})):t.innerHTML=e}}}]);