"use strict";(self.webpackChunkTalkStory=self.webpackChunkTalkStory||[]).push([[777],{510:(t,n,a)=>{a.d(n,{Y:()=>i,p:()=>s});var e=a(481),o=a.n(e);const s=(t,n)=>{const a=o().map(t).setView([-7.8,110.3],13);return o().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data ¬© OpenStreetMap contributors"}).addTo(a),n&&a.on("click",(t=>{n(t.latlng)})),a},i=(t,n,a="")=>{const e=o().marker(n).addTo(t);return a&&e.bindPopup(a).openPopup(),e}},777:(t,n,a)=>{a.r(n),a.d(n,{default:()=>s});var e=a(989),o=a(510);class s{async render(t,n){const a=document.getElementById("main-content");if(!a)return;a.innerHTML="";const o=`\n  <section class="story-list-section" id="bookmark-section">\n    <h2>Cerita Tersimpan</h2>\n      ${0===t.length?'\n        <div class="empty-bookmark">\n          <i class="fas fa-folder-open fa-3x"></i>\n            <h3>Belum Ada Cerita</h3>\n            <br>\n              <p>Simpan cerita favoritmu untuk dibaca nanti!</p>\n            <br>\n              <p>Atau kamu ingin jadi yang pertama berbagi cerita?</p>\n            <br>\n                <button id="post-button" class="btn-book green"><a href="#/add-story"><i class="fa-solid fa-plus"></i> Posting Cerita Pertama</a></button>\n          </div>':`\n          <div class="container-card" id="story-container">\n            ${t.map((t=>`\n              <article class="box-card">\n                <div class="img-box" title="${t.name}">\n                  <img src="${t.photoUrl}" alt="Foto cerita dari ${t.name}">\n                </div>\n                <div class="content-card">\n                  <h3>${t.name}</h3>\n                  <h4>${new Date(t.createdAt).toLocaleDateString()}</h4>\n                  <p>${t.description.substring(0,100)}...</p>\n                  <div class="bookmark-actions">\n                    <button class="ghost-btn detail-bookmark-btn" data-story='${JSON.stringify(t)}'>\n                      read more...\n                    </button>\n                    <button class="btn-icon red remove-bookmark-btn" data-id="${t.id}" title="Hapus dari Bookmark">\n                      <i class="fas fa-trash"></i>\n                    </button>\n                  </div>\n                </div>\n              </article>\n            `)).join("")}\n          </div>`}\n      </section>\n    `;await(0,e.A)(a,o),this.bindBookmarkPageEvents(n)}bindBookmarkPageEvents(t){const n=document.getElementById("bookmark-section");n&&(n.dataset.eventsBound||(n.dataset.eventsBound="true",n.addEventListener("click",(n=>{const a=n.target.closest(".detail-bookmark-btn");if(a){const n=JSON.parse(a.dataset.story);return void t.detailHandler(n)}const e=n.target.closest(".remove-bookmark-btn");if(e){const n=e.dataset.id;t.removeHandler(n)}}))))}showStoryDetailPopup(t,n,a){const e=`map-${Date.now()}`,s=document.createElement("div");s.classList.add("story-popup"),s.innerHTML=`\n      <div class="popup-content">\n        <img src="${t.photoUrl}" alt="Foto cerita detail dari ${t.name}" />\n        <div class="story-meta">\n          <p><strong>${t.name}</strong> ‚Ä¢ ${new Date(t.createdAt).toLocaleDateString()}</p>\n          <p>${t.description}</p>\n          <p>üìç ${t.locationName||"Tidak diketahui"}</p>\n        </div>\n        <div class="bookmark-button-wrapper">\n          <button id="bookmark-btn" class="${n?"unsave-btn":"save-btn"}">\n            <i class="fas ${n?"fa-bookmark-slash":"fa-bookmark"}"></i>\n            ${n?"Hapus Cerita":"Simpan Cerita"}\n          </button>\n        </div>\n        <div id="${e}" class="popup-map"></div>\n        <button class="popup-close-btn">Tutup</button>\n      </div>\n    `,document.body.appendChild(s),t.lat&&t.lon?setTimeout((()=>{const n=(0,o.p)(e),a=`<strong>Lokasi:</strong> ${t.locationName||"Tidak diketahui"}<br><strong>Lat:</strong> ${t.lat}<br><strong>Lon:</strong> ${t.lon}`;(0,o.Y)(n,[t.lat,t.lon],a),n.invalidateSize()}),100):document.getElementById(e).style.display="none";const i=()=>s.remove();s.querySelector(".popup-close-btn").addEventListener("click",i);const r=s.querySelector("#bookmark-btn");r&&"function"==typeof a&&r.addEventListener("click",(()=>a(i)))}}},989:(t,n,a)=>{a.d(n,{A:()=>e});const e=(t,n)=>{document.startViewTransition?document.startViewTransition((()=>{t.innerHTML=n})):t.innerHTML=n}}}]);