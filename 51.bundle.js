"use strict";(self.webpackChunkTalkStory=self.webpackChunkTalkStory||[]).push([[51],{51:(t,n,e)=>{e.r(n),e.d(n,{default:()=>i});var o=e(989),a=e(233),s=e(510);class i{constructor(){}async render(){const t=document.getElementById("main-content");t?(await(0,o.A)(t,'\n        <section class="story-list-section">\n          <h2>Daftar Cerita</h2>\n          <div class="container-card" id="story-container"></div>\n        </section>\n    '),(0,a.A)()):console.error("‚ùå #main-content tidak ditemukan saat render story list")}async showStories(t){const n=document.getElementById("story-container");if(n){n.innerHTML="";for(const e of t){const t=document.createElement("article");t.className="box-card",t.innerHTML=`\n        <div class="img-box" title="${e.name}">\n          <img src="${e.photoUrl}" alt="Foto cerita dari ${e.name}">\n        </div>\n        <div class="content-card">\n          <h3>${e.name}</h3>\n          <h4>${e.locationName||"Tanpa Lokasi"}</h4>\n          <p>${e.description}</p>\n          <button class="ghost-btn" data-story='${JSON.stringify(e)}'>\n            read more...\n          </button>\n        </div>\n      `,n.appendChild(t)}this.bindDetailButtons()}}bindDetailButtons(t){document.querySelectorAll(".ghost-btn").forEach((n=>{n.addEventListener("click",(()=>{const e=JSON.parse(n.getAttribute("data-story"));"function"==typeof t&&t(e)}))}))}showStoryDetailPopup(t,n,e){const o=`map-${Date.now()}`,a=document.createElement("div");a.classList.add("story-popup"),a.innerHTML=`\n    <div class="popup-content">\n      <img src="${t.photoUrl}" alt="Foto cerita detail dari ${t.name}" />\n        <div class="story-meta">\n          <p><strong>${t.name}</strong> ‚Ä¢ ${new Date(t.createdAt).toLocaleDateString()}</p>\n          <p>${t.description}</p>\n          <p>üìç ${t.locationName||"Tidak diketahui"}</p>\n        </div>\n\n        <div class="bookmark-button-wrapper">\n          <button id="bookmark-btn" class="${n?"unsave-btn":"save-btn"}">\n            <i class="fas ${n?"fa-bookmark-slash":"fa-bookmark"}"></i>\n            ${n?"Hapus Cerita":"Simpan Cerita"}\n          </button>\n        </div>\n      <div id="${o}" class="popup-map"></div>\n      <button class="popup-close-btn">Tutup</button>\n    </div>\n  `,document.body.appendChild(a),setTimeout((()=>{const n=(0,s.p)(o),e=`\n      <strong>Lokasi:</strong> ${t.locationName||"Tidak diketahui"}<br>\n      <strong>Lat:</strong> ${t.lat}<br>\n      <strong>Lon:</strong> ${t.lon}\n    `;(0,s.Y)(n,[t.lat,t.lon],e),n.invalidateSize()}),100),a.querySelector(".popup-close-btn").addEventListener("click",(()=>{a.remove()}));const i=a.querySelector("#bookmark-btn");i&&"function"==typeof e&&i.addEventListener("click",e)}updateBookmarkButton(t){const n=document.getElementById("bookmark-btn");n&&(n.innerHTML=`\n    <i class="fas ${t?"fa-bookmark-slash":"fa-bookmark"}"></i>\n    ${t?"Hapus Cerita":"Simpan Cerita"}\n  `,n.className=t?"unsave-btn":"save-btn",n.classList.add("bounce"),setTimeout((()=>n.classList.remove("bounce")),300))}}},510:(t,n,e)=>{e.d(n,{Y:()=>i,p:()=>s});var o=e(481),a=e.n(o);const s=(t,n)=>{const e=a().map(t).setView([-7.8,110.3],13);return a().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data ¬© OpenStreetMap contributors"}).addTo(e),n&&e.on("click",(t=>{n(t.latlng)})),e},i=(t,n,e="")=>{const o=a().marker(n).addTo(t);return e&&o.bindPopup(e).openPopup(),o}},989:(t,n,e)=>{e.d(n,{A:()=>o});const o=(t,n)=>{document.startViewTransition?document.startViewTransition((()=>{t.innerHTML=n})):t.innerHTML=n}}}]);